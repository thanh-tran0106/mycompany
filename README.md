PostgreSQL Learning Diary

Overview

This project showcases my journey in practicing PostgreSQL skills, including schema creation, table relationships, and querying. Throughout this project, I explored various SQL operations such as data manipulation, joining tables, and calculating sales insights, while also using Python for automation and interaction with the database.

1. Setting Up the Database

Schema Design
I started by designing the database structure, focusing on three main tables: Products, Customers, and Orders. Each table has a PRIMARY KEY, and the Orders table includes FOREIGN KEY references to both Products and Customers.

Products stores details like product name, category, and price.
Customers contains customer names and their countries.
Orders tracks who ordered what and in what quantity.
The schema aims to represent a simplified sales system where I can analyze product sales, customer behaviors, and revenue.

Tables Created:

Products Table:

sql
Copy code
CREATE TABLE products (
    product_id SERIAL PRIMARY KEY,
    product_name VARCHAR(100) NOT NULL,
    category VARCHAR(50) NOT NULL,
    price NUMERIC(10, 2) NOT NULL
);
Customers Table:

sql
Copy code
CREATE TABLE customers (
    customer_id SERIAL PRIMARY KEY,
    customer_name VARCHAR(100) NOT NULL,
    country VARCHAR(50) NOT NULL
);
Orders Table:

sql
Copy code
CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    customer_id INT REFERENCES customers(customer_id),
    order_date DATE NOT NULL,
    product_id INT REFERENCES products(product_id),
    quantity INT NOT NULL
);
Challenges & Learnings:
I learned how important it is to define relationships between tables through FOREIGN KEY constraints, which ensure data consistency.
While creating the Orders table, I initially struggled with understanding how foreign keys enforce referential integrity between the Products and Customers tables.
2. Querying Data

Joining Tables
One of my goals was to practice joining tables and extracting meaningful information from combined data. I performed multiple joins to analyze orders based on products and customers.

SQL Query Example - Joining Orders with Products and Customers:

sql
Copy code
SELECT o.order_id, c.customer_name, p.product_name, o.quantity
FROM orders o
JOIN products p ON o.product_id = p.product_id
JOIN customers c ON o.customer_id = c.customer_id;
This query helped me understand:

INNER JOINs: They only return rows where the join condition is met in both tables.
Purpose: This query shows detailed information about what products customers ordered, which is helpful for analyzing purchase behaviors.
Calculating Total Sales per Product
I also practiced calculating the total revenue generated by each product using SQL functions like SUM and multiplication.

sql
Copy code
SELECT p.product_name, SUM(p.price * o.quantity) AS total_sales
FROM products p
JOIN orders o ON p.product_id = o.product_id
GROUP BY p.product_name;
Insights:
Understanding GROUP BY was key to summarizing data. This query allowed me to calculate the total revenue for each product, helping me identify top-selling products.
3. Advanced Analytics

Sales by Product Category
Next, I wanted to see how each product category performs in terms of total units sold and revenue. Here's the query I used to summarize sales by product category:

sql
Copy code
SELECT p.category, SUM(o.quantity) AS total_units, SUM(p.price * o.quantity) AS total_sales
FROM products p
JOIN orders o ON p.product_id = o.product_id
GROUP BY p.category;
Sales by Country
Lastly, I created a query to analyze sales distribution across different countries, which gives insights into geographical trends in customer purchases:

sql
Copy code
SELECT c.country, SUM(o.quantity) AS total_units
FROM orders o
JOIN customers c ON o.customer_id = c.customer_id
GROUP BY c.country;
Purpose:
Both queries helped me practice aggregating data and grouping by specific attributes. It also deepened my understanding of how to gain insights from sales data by product and region.
4. Interacting with PostgreSQL via Python

To automate and interact with the database, I integrated Python. I used:

pandas for data manipulation.
psycopg2 and SQLAlchemy for database connection and management.
Script Highlights:
I wrote Python scripts to create tables in multiple schemas (tenant2, tenant3), insert data, and back up the database.
This part helped me automate tasks and manage multiple schemas more efficiently, further reinforcing my understanding of database administration.

Reflection

Through this project, I:

Practiced fundamental SQL operations: creating tables, defining foreign key relationships, and writing queries to extract useful insights.
Learned to aggregate and group data to analyze product sales and customer behaviors.
Developed Python scripts to manage the PostgreSQL database and automate tasks across different schemas.
Overcame challenges in understanding how relationships are enforced in a database, and how to optimize queries for better performance.
This project was a solid learning experience in using PostgreSQL for real-world data management and analysis tasks, and I plan to extend it by exploring more advanced SQL features like views and stored procedures.

